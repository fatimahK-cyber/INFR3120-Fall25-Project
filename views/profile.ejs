<%- include('partials/header') %>

<main class="hero">
  <section class="profile-card">
    <h2 class="page-title">My Profile</h2>

    <%
      const user = session && session.user ? session.user : null;
      const hasCustomImage =
        user && user.profileImage && user.profileImage !== "/uploads/default.png";
    %>

    <div class="profile-picture-wrapper">
      <img
        src="<%= hasCustomImage ? user.profileImage : '/uploads/default.png' %>"
        alt="Profile picture"
        class="profile-picture-img"
      >
    </div>

    <% if (!hasCustomImage) { %>
      <!-- No picture yet: show upload -->
      <form action="/profile/upload" method="POST"
            enctype="multipart/form-data" class="auth-form profile-form">
        <div class="form-row">
          <label for="profileImage">Upload New Profile Picture</label>
          <input type="file" name="profileImage" id="profileImage" accept="image/*" required>
        </div>

        <div class="form-actions">
          <button type="submit" class="btn hero-btn">
            Upload Picture
          </button>
        </div>
      </form>
    <% } else { %>
      <!-- Picture exists: show delete -->
      <form action="/profile/delete" method="POST" class="profile-form">
        <div class="form-actions">
          <button class="btn btn-danger">
            üóëÔ∏è Delete Picture
          </button>
        </div>
      </form>
    <% } %>
  </section>
</main>

<%- include('partials/footer') %>
